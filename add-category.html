<!DOCTYPE html>
<html lang="lo">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ເພີ່ມປະເພດການຊຳລະ - ການຈັດການຄ່າໃຊ້ຈ່າຍ</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Lao:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* General Body Styles */
      body {
        font-family: "Noto Sans Lao", sans-serif; /* Using a Lao-friendly font */
        margin: 0;
        padding: 0;
        background: #dff7f3;
        background: linear-gradient(
          90deg,
          rgba(223, 247, 243, 1) 0%,
          rgb(200, 250, 211) 42%,
          rgb(255, 214, 241) 56%
        );
        color: #333;
        line-height: 1.6;
        display: flex;
        flex-direction: column;
        min-height: 100vh; /* Ensure body takes full viewport height */
      }

      /* Header Styles */
      header {
        background: #dff7f3;
        background: linear-gradient(
          90deg,
          rgba(223, 247, 243, 1) 0%,
          rgb(200, 250, 211) 42%,
          rgb(255, 214, 241) 56%
        );
        color: #ecf0f1; /* Light text color */
        padding: 1rem 0;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      #navigation-bar-own {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      nav a {
        color: #ecf0f1;
        text-decoration: none;
        font-size: 1.5rem;
        font-weight: bold;
      }

      nav a span {
        color: #1abc9c; /* Teal accent for "ຄ່າໃຊ້ຈ່າຍສ່ວນຕົວ." */
      }

      nav ul {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        align-items: center;
      }

      nav ul li {
        margin-left: 20px;
      }

      nav ul li a {
        color: #ecf0f1;
        text-decoration: none;
        font-size: 1rem;
        padding: 5px 10px;
        border-radius: 4px;
        transition: background-color 0.3s ease;
      }

      nav ul li a:hover {
        background-color: #34495e; /* Slightly darker on hover */
      }

      /* Hamburger button for small screens (placeholder for now, not styled for full functionality here) */
      nav button {
        display: none; /* Hidden by default, show on small screens */
        background: none;
        border: none;
        color: #ecf0f1;
        font-size: 1.5rem;
        cursor: pointer;
      }

      /* Main Content Area */
      main {
        flex-grow: 1; /* Allows main content to take available space */
        padding: 40px 20px;

        display: flex;
        justify-content: center;
        align-items: flex-start; /* Align content to the top */
      }

      #add-category-section {
        background: #dff7f3;
        background: linear-gradient(
          90deg,
          rgba(223, 247, 243, 1) 0%,
          rgb(200, 250, 211) 42%,
          rgb(255, 214, 241) 56%
        );
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        padding: 30px;
        max-width: 600px;
        width: 100%;
        box-sizing: border-box; /* Include padding in element's total width and height */
      }

      #add-category-section > div > div > div > a {
        /* Targeting the "ກັບໄປໜ້າຫຼັກ" link */
        display: inline-block;
        background-color: #3498db; /* Blue for back button */
        color: white;
        text-decoration: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1rem;
        margin-bottom: 20px;
        transition: background-color 0.3s ease;
      }

      #add-category-section > div > div > div > a:hover {
        background-color: #2980b9;
      }

      #add-form h1 {
        color: #2c3e50;
        font-size: 2rem;
        margin-bottom: 10px;
        text-align: center;
      }

      #add-form p {
        color: #7f8c8d;
        text-align: center;
        margin-bottom: 30px;
      }

      #show-message {
        color: #e74c3c; /* Red for error messages */
        text-align: center;
        margin-bottom: 15px;
        font-weight: bold;
      }

      /* Form Styling */
      #add-category-form div {
        margin-bottom: 15px;
      }

      #add-category-form input[type="text"] {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
        box-sizing: border-box;
        background-color: #fcfcfc;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
      }

      #add-category-form input[type="text"]::placeholder {
        color: #aaa;
      }

      #add-category-form input[type="text"]:focus {
        border-color: #3498db;
        box-shadow: 0 0 8px rgba(52, 152, 219, 0.2);
        outline: none;
      }

      #btn-load {
        width: 100%;
        padding: 15px;
        background-color: #1abc9c; /* Teal for save button */
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
      }

      #btn-load:hover {
        background-color: #16a085;
        transform: translateY(-2px);
      }

      #btn-load:active {
        transform: translateY(0);
      }

      /* Loader styles */
      #loader {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 20px 0;
      }

      #loader div {
        width: 12px;
        height: 12px;
        background-color: #1abc9c;
        border-radius: 50%;
        margin: 0 5px;
        animation: bounce 1.2s infinite ease-in-out both;
      }

      #loader div:nth-child(1) {
        animation-delay: -0.32s;
      }
      #loader div:nth-child(2) {
        animation-delay: -0.16s;
      }
      #loader div:nth-child(3) {
        animation-delay: 0s;
      } /* No delay */

      @keyframes bounce {
        0%,
        80%,
        100% {
          transform: scale(0);
        }
        40% {
          transform: scale(1);
        }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        nav {
          flex-direction: column;
          align-items: flex-start;
        }

        nav ul {
          width: 100%;
          flex-direction: column;
          align-items: flex-start;
          display: none; /* Hide nav items by default */
        }

        nav ul.show {
          /* Class to show nav items when toggled (requires JS) */
          display: flex;
        }

        nav button {
          display: block; /* Show hamburger button */
          align-self: flex-end; /* Align to the right in flex column */
        }

        #add-category-section {
          padding: 20px;
        }

        #add-form h1 {
          font-size: 1.8rem;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <section id="navigation-bar-own">
        <div>
          <nav>
            <a href="#">ເວັບໃຊ້ຈັດການ<span>ຄ່າໃຊ້ຈ່າຍສ່ວນຕົວ.</span></a>
            <button
              type="button"
              data-toggle="collapse"
              data-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <i></i>
            </button>
            <div id="navbarNav">
              <ul>
                <li>
                  <a href="#" onclick="logout(event)">Log out</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </section>
    </header>

    <main>
      <section id="add-category-section">
        <div>
          <div>
            <div>
              <a href="./dashboard.html">
                ກັບໄປໜ້າຫຼັກ
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="35"
                  height="35"
                  fill="currentColor"
                  class="bi bi-arrow-return-left"
                  viewBox="0 0 16 16"
                >
                  <path
                    fill-rule="evenodd"
                    d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5"
                  />
                </svg>
              </a>

              <section id="add-form">
                <h3 id="show-message"></h3>
                <h1>ເພີ່ມປະເພດການຊຳລະ</h1>
                <p>ເພີ່ມປະເພດການຊຳລະ ທີ່ທ່ານຕ້ອງການ</p>

                <form id="add-category-form" method="GET">
                  <div>
                    <input
                      type="text"
                      id="add-category"
                      placeholder="ພິມຊື່ປະເພດການຊຳລະ"
                      required
                    />
                  </div>

                  <div id="loader" style="display: none">
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                  </div>

                  <button
                    type="submit"
                    id="btn-load"
                    onclick="addCategory(event)"
                  >
                    ບັນທຶກ
                  </button>
                </form>
              </section>
            </div>
          </div>
        </div>
      </section>
    </main>

    <script>
      // The original JavaScript is kept for functionality, but note the confirm() usage
      // This section is for JS, not HTML/CSS only.
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("add-category-form");
        const input = document.getElementById("add-category");
        const loader = document.getElementById("loader");
        const submitBtn = document.getElementById("btn-load");

        input.addEventListener("focus", function () {
          // Changed to directly apply styles to the input
          this.style.borderColor = "#888";
          this.style.boxShadow = "0 0 5px rgba(136, 136, 136, 0.3)";
        });

        input.addEventListener("blur", function () {
          // Changed to reset styles on blur
          this.style.borderColor = "#ddd";
          this.style.boxShadow = "none";
        });

        form.addEventListener("submit", function (e) {
          e.preventDefault();

          if (input.value.trim()) {
            loader.style.display = "flex";
            submitBtn.style.opacity = "0.7";
            submitBtn.disabled = true;

            setTimeout(() => {
              loader.style.display = "none";
              submitBtn.style.opacity = "1";
              submitBtn.disabled = false;

              const message = document.getElementById("show-message");
              message.textContent = "ເພີ່ມປະເພດສຳເລັດແລ້ວ!";
              message.style.color = "green";

              input.value = "";

              setTimeout(() => {
                message.textContent = "";
              }, 3000);
            }, 1500);
          }

          // This assumes addCategory function is defined elsewhere
          // If it's a synchronous call, it will execute before the setTimeout
          if (typeof addCategory === "function") {
            addCategory(e);
          }
        });
      });

      function logout(event) {
        event.preventDefault();
        // IMPORTANT: In a production environment, avoid using `confirm()` and `alert()`
        // Instead, use a custom modal or message box for user interaction.
        if (confirm("ທ່ານຕ້ອງການອອກຈາກລະບົບບໍ?")) {
          // Firebase sign-out if needed
          // The firebase object is assumed to be initialized by the external scripts
          if (typeof firebase !== "undefined" && firebase.auth) {
            firebase
              .auth()
              .signOut()
              .then(() => {
                window.location.href = "index.html";
              })
              .catch((error) => {
                console.error("Logout Error:", error);
                alert("Logout failed: " + error.message); // Again, replace with custom message box
              });
          } else {
            window.location.href = "index.html"; // Fallback if firebase not loaded
          }
        }
      }
    </script>

    <!-- Firebase SDK - these are external scripts and were part of your original request -->
    <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-firestore.js"></script>

    <script>
      // Firebase config from your original snippet
      var firebaseConfig = {
        apiKey: "AIzaSyARaEo61U-dTZTYxb9r8JKO3ESwCQwPlIo",
        authDomain: "learn-indonesian.firebaseapp.com",
        projectId: "learn-indonesian",
        storageBucket: "learn-indonesian.appspot.com",
        messagingSenderId: "61342559557",
        appId: "1:61342559557:web:dff4d03cef9fb5cf1b222c",
      };
      // Initialize Firebase if it's not already
      if (typeof firebase !== "undefined" && !firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
    </script>

    <!-- Your custom script, assumed to contain addCategory function -->
    <script src="./js/addcategory-script.js"></script>
  </body>
</html>
